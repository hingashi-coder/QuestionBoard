webpackJsonp([1],{"9M+g":function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=o("VU/8")({name:"App"},n,!1,function(e){o("p/0W")},null,null).exports,a=o("/ocq"),r=o("fZjL"),u=o.n(r),d=0,c={data:function(){return{items:[],categolies:[]}},mounted:function(){},methods:{importQ:function(e){var t=this,o=new FileReader;o.readAsText(e.target.files[0]),o.addEventListener("load",function(e){o.result.split("\n").forEach(function(e){t.items.push(t.createData(e))})})},load:function(e){var t=this,o=new FileReader;o.readAsText(e.target.files[0]),o.addEventListener("load",function(e){var i=JSON.parse(o.result);i.items.forEach(function(e){t.items.push(t.createData(e.title,e.answer,e.pos.x,e.pos.y))}),i.categolies.forEach(function(e){var o=t.createCategory(e.pos.x,e.pos.y,e.title);e.items.forEach(function(e){o.items.push(t.createData(e.title,e.answer,e.pos.x,e.pos.y,o))}),t.categolies.push(o)}),console.log(i)})},exp:function(){var e={items:this.items,categolies:this.categolies},t=o("Wi5H")(e),i=new Blob([t],{type:"text/plan"}),n=document.createElement("a");n.href=URL.createObjectURL(i),n.download="作ったファイル.txt",n.click()},mousemove:function(){},createCategory:function(e,t,o){var i=this,n={title:o,id:Math.floor(1e4*Math.random()),pos:{x:e,y:t},items:[],move:!1,style:{top:"0px",left:"0px",zIndex:1},update:function(){this.style.top=this.pos.y+"px",this.style.left=this.pos.x+"px"},test:function(){this.style.pos+=50,n.update()},mousedown:function(e){d+=1,n.style.zIndex=d;var t=e.pageX-n.pos.x,o=e.pageY-n.pos.y;n.move=!0,i.mousemove=function(e){n.move&&(n.pos.x=e.pageX-t,n.pos.y=e.pageY-o,n.update())}},mouseup:function(){n.move=!1,i.mousemove=function(){}},keypress:function(e){13===(e.keyCode||e.charCode||0)&&(n.editMode=!1)},edit:function(){n.editMode=!0},editMode:!1,add:function(e){e.parentCategory=n,n.items.push(e)},remove:function(){confirm("Are you sure?")&&(i.categolies=i.categolies.filter(function(e){if(e.id!==n.id)return e}))}};return n.update(),n},createData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"未回答",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=this,s={title:e,answer:t,parentCategory:arguments[4],id:Math.floor(1e4*Math.random()),pos:{x:o,y:i},style:{top:"0px",left:"0px",zIndex:1},editMode:!1,update:function(){this.style.top=this.pos.y+"px",this.style.left=this.pos.x+"px"},mousedown:function(e){d+=1,s.style.zIndex=d;var t=e.pageX-s.pos.x,o=e.pageY-s.pos.y;s.move=!0;var i=void 0;n.mousemove=function(e){if(s.move){s.pos.x=e.pageX-t,s.pos.y=e.pageY-o,s.update();var a=n.items.filter(function(t){if(Math.abs(t.pos.x+150-e.pageX)<150&&t!==s&&Math.abs(t.pos.y+50-e.pageY)<50)return t});u()(n.categolies).forEach(function(t){t=n.categolies[t],Math.abs(t.pos.x+170-e.pageX)<170&&t!==s&&Math.abs(t.pos.y+50-e.pageY)<50&&a.push(t)}),void 0!==i&&(Array.isArray(i.items)?i.style.backgroundColor="white":i.style.backgroundColor="",s.dup=!1,s.dupTo=null),a.length>0&&(a[0].style.backgroundColor="red",s.dup=!0,s.dupTo=a[0],i=a[0])}}},mouseup:function(){s.move=!1,s.dup&&(s.dupTo.add(s),n.items=n.items.filter(function(e){if(e.id!==s.id)return e}),Array.isArray(s.dupTo.items)?s.dupTo.style.backgroundColor="white":s.dupTo.style.backgroundColor="rgb(245, 245, 220)",s.dup=null),n.mousemove=function(){}},keypress:function(e){13===(e.keyCode||e.charCode||0)&&(s.editMode=!1)},edit:function(){s.editMode=!0},remove:function(){confirm("Are you sure?")&&(n.items=n.items.filter(function(e){if(e.id!==s.id)return e}))},pop:function(){confirm("are you sure to pop?")&&(n.items.push(s),s.parentCategory.items=s.parentCategory.items.filter(function(e){if(e.id!==s.id)return e}))},add:function(e){var t=n.createCategory(100,100,"新規グループ");n.categolies.push(t),t.add(e),t.add(s),n.items=n.items.filter(function(t){if(t.id!==s.id&&t.id!==e.id)return t})}};return s.update(),s},addq:function(){this.items.push(this.createData("新規質問"))}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"edit"},[o("div",{staticClass:"field",on:{mousemove:e.mousemove}},[e._l(e.categolies,function(t){return o("div",{key:t.id,staticClass:"categolies card",style:t.style,on:{contextmenu:function(e){return e.target!==e.currentTarget?null:t.remove(e)},mousedown:t.mousedown,mouseup:t.mouseup}},[o("div",{staticClass:"card-header"},[t.editMode?e._e():o("p",{on:{contextmenu:function(e){return e.target!==e.currentTarget?null:t.remove(e)},click:t.edit}},[e._v(e._s(t.title))]),e._v(" "),t.editMode?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"cat.title"}],domProps:{value:t.title},on:{keypress:t.keypress,input:function(o){o.target.composing||e.$set(t,"title",o.target.value)}}}):e._e()]),e._v(" "),o("div",{staticClass:"card-body"},e._l(t.items,function(t){return o("div",{key:t.id,staticClass:"item card",style:t.style,on:{contextmenu:function(e){return t.pop()}}},[o("div",{staticClass:"card-body"},[o("h6",{staticClass:"card-title"},[e._v(e._s(t.title))]),e._v(" "),t.editMode?e._e():o("p",{on:{click:function(e){return t.edit()}}},[e._v(e._s(t.answer))]),e._v(" "),t.editMode?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"item.answer"}],domProps:{value:t.answer},on:{keypress:t.keypress,input:function(o){o.target.composing||e.$set(t,"answer",o.target.value)}}}):e._e()])])}),0)])}),e._v(" "),e._l(e.items,function(t){return o("div",{key:t.id,staticClass:"item card",style:t.style,on:{contextmenu:t.remove,mousedown:t.mousedown,mouseup:t.mouseup}},[o("div",{staticClass:"card-body"},[o("h5",{staticClass:"card-title"},[e._v(e._s(t.title))]),e._v(" "),t.editMode?e._e():o("p",{staticClass:"card-text",on:{click:t.edit}},[e._v(e._s(t.answer))]),e._v(" "),t.editMode?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"item.answer"}],domProps:{value:t.answer},on:{keypress:t.keypress,input:function(o){o.target.composing||e.$set(t,"answer",o.target.value)}}}):e._e()])])})],2),e._v(" "),o("div",{staticClass:"tools"},[o("input",{attrs:{type:"button",value:"質問作成"},on:{click:e.addq}}),e._v(" "),o("label",{attrs:{for:"getfile"}},[e._v("質問インポート")]),e._v(" "),o("input",{attrs:{type:"file",id:"getfile",accept:"text/*"},on:{change:e.importQ}}),e._v(" "),o("input",{attrs:{type:"button",value:"セーブ",id:"savefile",accept:"text/*"},on:{click:e.exp}}),e._v(" "),o("label",{attrs:{for:"getfile"}},[e._v("ロード")]),e._v(" "),o("input",{attrs:{type:"file",id:"getfile",accept:"text/*"},on:{change:e.load}})])])},staticRenderFns:[]};var p=o("VU/8")(c,l,!1,function(e){o("xx1I")},"data-v-72019a6d",null).exports;i.default.use(a.a);var f=new a.a({routes:[{path:"/",component:p}]}),m=o("Tqaz");o("Jmt5"),o("9M+g");i.default.config.productionTip=!1,i.default.use(m.a),new i.default({el:"#app",router:f,components:{App:s},template:"<App/>"})},"p/0W":function(e,t){},xx1I:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.33a5bfbe74b9e238b643.js.map