webpackJsonp([1],{"9M+g":function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=o("VU/8")({name:"App"},s,!1,function(e){o("p/0W")},null,null).exports,a=o("/ocq"),r=o("fZjL"),d=o.n(r),l=0,u={data:function(){return{items:[],categolies:[]}},mounted:function(){},methods:{importQ:function(e){var t=this,o=new FileReader;o.readAsText(e.target.files[0]),o.addEventListener("load",function(e){o.result.split("\n").forEach(function(e){t.items.push(t.createData(e))})})},load:function(e){var t=this,o=new FileReader;o.readAsText(e.target.files[0]),o.addEventListener("load",function(e){var i=JSON.parse(o.result);i.items.forEach(function(e){t.items.push(t.createData(e.title,e.answer,e.pos.x,e.pos.y))}),i.categolies.forEach(function(e){var o=t.createCategory(e.pos.x,e.pos.y,e.title,e.style.backgroundColor);e.items.forEach(function(e){o.items.push(t.createData(e.title,e.answer,e.pos.x,e.pos.y,o))}),t.categolies.push(o)}),console.log(i)})},exp:function(){var e={items:this.items,categolies:this.categolies},t=o("Wi5H")(e),i=new Blob([t],{type:"text/plan"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download="作ったファイル.txt",s.click()},mousemove:function(){},createCategory:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"white",s=this,n={title:o,id:Math.floor(1e4*Math.random()),pos:{x:e,y:t},items:[],move:!1,style:{top:"0px",left:"0px",zIndex:1,backgroundColor:i},update:function(){this.style.top=this.pos.y+"px",this.style.left=this.pos.x+"px"},test:function(){this.style.pos+=50,n.update()},mousedown:function(e){l+=1,n.style.zIndex=l;var t=e.pageX-n.pos.x,o=e.pageY-n.pos.y;n.move=!0,s.mousemove=function(e){n.move&&(n.pos.x=e.pageX-t,n.pos.y=e.pageY-o,n.update())}},mouseup:function(){n.move=!1,s.mousemove=function(){}},keypress:function(e){13===(e.keyCode||e.charCode||0)&&(n.editMode=!1)},edit:function(){n.editMode=!0},editMode:!1,add:function(e){e.parentCategory=n,n.items.push(e)},remove:function(){confirm("Are you sure?")&&(s.categolies=s.categolies.filter(function(e){if(e.id!==n.id)return e}))}};return n.update(),n},createData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"未回答",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=this,n={title:e,answer:t,parentCategory:arguments[4],id:Math.floor(1e4*Math.random()),pos:{x:o,y:i},style:{top:"0px",left:"0px",zIndex:1,backgroundColor:"white"},editMode:!1,editTitle:!1,update:function(){this.style.top=this.pos.y+"px",this.style.left=this.pos.x+"px"},mousedown:function(e){l+=1,n.style.zIndex=l;var t=e.pageX-n.pos.x,o=e.pageY-n.pos.y;n.move=!0;var i=void 0;s.mousemove=function(e){if(n.move){n.pos.x=e.pageX-t,n.pos.y=e.pageY-o,n.update();var a=s.items.filter(function(t){if(Math.abs(t.pos.x+150-e.pageX)<150&&t!==n&&Math.abs(t.pos.y+50-e.pageY)<50)return t});d()(s.categolies).forEach(function(t){t=s.categolies[t],Math.abs(t.pos.x+170-e.pageX)<170&&t!==n&&Math.abs(t.pos.y+50-e.pageY)<50&&a.push(t)}),void 0!==i&&(Array.isArray(i.items)?i.style.backgroundColor=i.beforeColor:i.style.backgroundColor="",n.dup=!1,n.dupTo=null),a.length>0&&(a[0].beforeColor=a[0].style.backgroundColor,a[0].style.backgroundColor="red",n.dup=!0,n.dupTo=a[0],i=a[0])}}},mouseup:function(){n.move=!1,n.dup&&(n.dupTo.add(n),s.items=s.items.filter(function(e){if(e.id!==n.id)return e}),Array.isArray(n.dupTo.items)?n.dupTo.style.backgroundColor=n.dupTo.beforeColor:n.dupTo.style.backgroundColor="white",n.dup=null),s.mousemove=function(){}},keypress:function(e){13===(e.keyCode||e.charCode||0)&&(n.editMode=!1)},keypressEdit:function(e){13===(e.keyCode||e.charCode||0)&&(n.editTitle=!1)},edit:function(){n.editMode=!n.editMode},editTitleSwitch:function(){n.editTitle=!n.editTitle},remove:function(){confirm("Are you sure?")&&(s.items=s.items.filter(function(e){if(e.id!==n.id)return e}))},pop:function(){confirm("are you sure to pop?")&&(s.items.push(n),n.parentCategory.items=n.parentCategory.items.filter(function(e){if(e.id!==n.id)return e}))},add:function(e){var t=s.createCategory(100,100,"新規グループ");s.categolies.push(t),t.add(e),t.add(n),s.items=s.items.filter(function(t){if(t.id!==n.id&&t.id!==e.id)return t})}};return n.update(),n},addq:function(){this.items.push(this.createData("新規質問"))}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"edit"},[o("div",{staticClass:"field",on:{mousemove:e.mousemove}},[e._l(e.categolies,function(t){return o("div",{key:t.id,staticClass:"categolies card",style:t.style,on:{contextmenu:function(e){return e.target!==e.currentTarget?null:t.remove(e)},mousedown:t.mousedown,mouseup:t.mouseup}},[o("div",{staticClass:"card-header"},[o("div",{staticClass:"bar"},[t.editMode?e._e():o("div",{on:{contextmenu:function(e){return e.target!==e.currentTarget?null:t.remove(e)},click:t.edit}},[e._v(e._s(t.title))]),e._v(" "),t.editMode?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"cat.title"}],domProps:{value:t.title},on:{keypress:t.keypress,input:function(o){o.target.composing||e.$set(t,"title",o.target.value)}}}):e._e()]),e._v(" "),t.editMode?o("input",{directives:[{name:"model",rawName:"v-model",value:t.style.backgroundColor,expression:"cat.style.backgroundColor"}],attrs:{type:"color"},domProps:{value:t.style.backgroundColor},on:{input:function(o){o.target.composing||e.$set(t.style,"backgroundColor",o.target.value)}}}):e._e()]),e._v(" "),o("div",{staticClass:"card-body"},e._l(t.items,function(t){return o("div",{key:t.id,staticClass:"item card",style:t.style,on:{contextmenu:function(e){return t.pop()}}},[o("div",{staticClass:"card-body"},[t.editTitle?e._e():o("h6",{staticClass:"card-title",on:{click:t.editTitleSwitch,keypress:t.keypressEdit}},[e._v(e._s(t.title))]),e._v(" "),t.editTitle?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"item.title"}],domProps:{value:t.title},on:{keypress:t.keypressEdit,input:function(o){o.target.composing||e.$set(t,"title",o.target.value)}}}):e._e(),e._v(" "),t.editMode?e._e():o("p",{on:{click:function(e){return t.edit()}}},[e._v(e._s(t.answer))]),e._v(" "),t.editMode?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"item.answer"}],domProps:{value:t.answer},on:{keypress:t.keypress,input:function(o){o.target.composing||e.$set(t,"answer",o.target.value)}}}):e._e()])])}),0)])}),e._v(" "),e._l(e.items,function(t){return o("div",{key:t.id,staticClass:"item card",style:t.style,on:{contextmenu:t.remove,mousedown:t.mousedown,mouseup:t.mouseup}},[o("div",{staticClass:"card-body"},[o("div",{staticClass:"bar"},[o("div",[t.editTitle?e._e():o("h5",{staticClass:"card-title",on:{click:t.editTitleSwitch}},[e._v(e._s(t.title))]),e._v(" "),t.editTitle?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"item.title"}],domProps:{value:t.title},on:{keypress:t.keypressEdit,input:function(o){o.target.composing||e.$set(t,"title",o.target.value)}}}):e._e()]),e._v(" "),o("div",[t.editMode?e._e():o("p",{staticClass:"card-text",on:{click:t.edit}},[e._v(e._s(t.answer))]),e._v(" "),t.editMode?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"item.answer"}],domProps:{value:t.answer},on:{keypress:t.keypress,input:function(o){o.target.composing||e.$set(t,"answer",o.target.value)}}}):e._e()])])])])})],2),e._v(" "),o("div",{staticClass:"tools"},[o("input",{attrs:{type:"button",value:"質問作成"},on:{click:e.addq}}),e._v(" "),o("label",{attrs:{for:"getfile"}},[e._v("質問インポート")]),e._v(" "),o("input",{attrs:{type:"file",id:"getfile",accept:"text/*"},on:{change:e.importQ}}),e._v(" "),o("input",{attrs:{type:"button",value:"セーブ",id:"savefile",accept:"text/*"},on:{click:e.exp}}),e._v(" "),o("label",{attrs:{for:"getfile"}},[e._v("ロード")]),e._v(" "),o("input",{attrs:{type:"file",id:"getfile",accept:"text/*"},on:{change:e.load}})])])},staticRenderFns:[]};var p=o("VU/8")(u,c,!1,function(e){o("yzyy")},"data-v-3b26270f",null).exports;i.default.use(a.a);var m=new a.a({routes:[{path:"/",component:p}]}),v=o("Tqaz");o("Jmt5"),o("9M+g");i.default.config.productionTip=!1,i.default.use(v.a),new i.default({el:"#app",router:m,components:{App:n},template:"<App/>"})},"p/0W":function(e,t){},yzyy:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a214733c12e87b79e19c.js.map